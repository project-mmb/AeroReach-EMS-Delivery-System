<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AeroReach ‚Äî Sign Up</title>
<link rel="stylesheet" href="style.css">
  <style>* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: Inter, Arial, sans-serif;
}

body {
  width: 100vw;
  height: 100vh;
  background: #f2f7ff;
  display: flex;
  flex-direction: column;
}

.container {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
}

/* HERO */
.hero {
  padding: 30px;
  text-align: center;
}

/* FULL SCREEN CARDS */
.card {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 25px;
  background: #fff;
  border-radius: 0;
  box-shadow: none;
}

h3 {
  margin-bottom: 15px;
}

/* GRID FOR ROLE SELECTION */
.action-grid {
  display: flex;
  gap: 16px;
  margin-top: 40px;
}

.action-box {
  flex: 1;
  padding: 25px;
  text-align: center;
  border-radius: 12px;
  background: #e7f0ff;
  font-size: 18px;
  cursor: pointer;
  font-weight: 600;
  transition:.2s;
}

.action-box:hover {
  background:#cfe0ff;
}

/* FORM INPUTS */
label {
  font-size: 14px;
  margin-bottom: 4px;
  color:#333;
}

input, select {
  width:100%;
  padding:12px;
  margin-bottom:16px;
  border:1px solid #ccc;
  border-radius:8px;
}

.btn {
  width:100%;
  padding:14px;
  border-radius:10px;
  font-weight:600;
  text-align:center;
  cursor:pointer;
  margin-top:14px;
}

.btn-primary {
  background:#007bff;
  color:white;
}

.btn-primary:hover {
  background:#0063cc;
}

.btn-secondary {
  background:#eee;
}

.btn-secondary:hover {
  background:#ddd;
}
</style>
</head>

<body>
<div class="container">

  <div class="hero">
    <h2>Create Your Account</h2>
    <small>Choose how you will use AeroReach</small>
  </div>

  <!-- Role Choice -->
  <div class="card">
    <h3 style="text-align:center">Select Role</h3>
    <div class="action-grid">
      <div class="action-box" onclick="showUser()">üßç I am a User</div>
      <div class="action-box" onclick="showResponder()">üöë I am a Responder</div>
    </div>
  </div>

  <!-- USER SIGN UP -->
  <div id="userForm" class="card" style="display:none;">
    <label>Full Name</label>
    <input id="uname">

    <label>Age</label>
    <input type="number" id="uage">

    <label>Village / Area</label>
    <input id="uvillage">

    <label>Medical Focus</label>
    <select id="umedical">
      <option>Injury</option>
      <option>Asthma</option>
      <option>Medication Refill</option>
      <option>Postpartum</option>
      <option>Chronic</option>
      <option>GBV</option>
    </select>

    <div class="btn btn-secondary" onclick="saveGPS()">üìç Save GPS Location</div>
    <div class="btn btn-primary" onclick="signupUser()">Continue ‚Üí</div>
  </div>

  <!-- RESPONDER -->
  <div id="respForm" class="card" style="display:none;">
    <label>Name</label>
    <input id="rname">

    <label>Organization</label>
    <input id="rorg">

    <label>Role</label>
    <input id="rrole">

    <label>Email</label>
    <input id="remail">

    <div class="btn btn-primary" onclick="signupResponder()">Continue ‚Üí</div>
  </div>

</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<script>
const config = {
  apiKey:"AIzaSyDgEH4QnHBLWzg54MNexYZJaATpRHFC_DA",
  authDomain:"aeroreach-5d4ae.firebaseapp.com",
  databaseURL:"https://aeroreach-5d4ae-default-rtdb.firebaseio.com",
  projectId:"aeroreach-5d4ae",
  storageBucket:"aeroreach-5d4ae.appspot.com",
  messagingSenderId:"477756305528",
  appId:"1:477756305528:web:470f50f591bee98e3e3d8d"
};
firebase.initializeApp(config);
const db = firebase.database();
const auth = firebase.auth();

let gps = null;

function showUser(){
  userForm.style.display = "block";
  respForm.style.display = "none";
}
function showResponder(){
  respForm.style.display = "block";
  userForm.style.display = "none";
}

function saveGPS(){
  navigator.geolocation.getCurrentPosition(pos=>{
    gps = {lat:pos.coords.latitude, lng:pos.coords.longitude};
    alert("GPS saved ‚úî");
  });
}

async function signupUser(){
  const name = uname.value.trim();
  const age  = parseInt(uage.value);
  const village = uvillage.value.trim();
  const medical = umedical.value;

  if(!name || !age || !village){
    alert("Fill all fields.");
    return;
  }

  const cred = await auth.signInAnonymously();
  const uid = cred.user.uid;

  await db.ref("users/"+uid).set({
    name,age,village,medical,gps,
    createdAt:Date.now()
  });

  localStorage.setItem("uid",uid);
  window.location="user-hub.html";
}

async function signupResponder(){
  const name=rname.value.trim();
  const org=rorg.value.trim();
  const role=rrole.value.trim();
  const email=remail.value.trim();

  if(!name || !org || !role || !email){
    alert("Fill all fields");
    return;
  }

  const cred = await auth.signInAnonymously();
  const id=cred.user.uid;

  await db.ref("responders/"+id).set({
    name,org,role,email,
    createdAt:Date.now()
  });

  localStorage.setItem("responder",id);
  window.location="responder-dashboard.html";
}
</script>
</body>
</html>

